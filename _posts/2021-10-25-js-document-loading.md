---
title: "JS - ë¬¸ì„œì™€ ë¦¬ì†ŒìŠ¤ ë¡œë”©"
date: 2021-10-25
comments: true
read_time: false
toc: true
categories:
  - JS
tags:
  - document
  - loading
---

ë¸Œë¼ìš°ì €ì—ì„œ ë¬¸ì„œë¥¼ ì—´ ë•Œ ì‘ì—… ì§„í–‰ ì •ë„ì— ë”°ë¼ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ê°€ ìˆê³  ì´ë¥¼ í™œìš©í•˜ë©´ ë§ì€ ê²ƒì„ í•  ìˆ˜ ìˆë‹¤.  
ê°„ë‹¨í•˜ê²Œ ì‘ì„±ë‚´ìš©ì´ ìˆëŠ” í˜ì´ì§€ì˜ ê²½ìš° ì´íƒˆí•  ë•Œ ë°œìƒí•˜ëŠ” ê²½ê³ ì°½ ë“±ì´ ìˆê² ë‹¤.  
ì´ì™€ ê°™ì€ ë¬¸ì„œë¥¼ ë¡œë”©í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ì— ëŒ€í•œ ë©”ëª¨.

## ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸

ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë“¤ì€ ê°„ë‹¨í•˜ê²ŒëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

- `DOMContentLoaded` : DOM íŠ¸ë¦¬ êµ¬ì„±ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ `document` ê°ì²´ì—ì„œ ë°œìƒë˜ê³  ì´ ë‹¨ê³„ì—ì„œëŠ” ì´ë¯¸ì§€ë‚˜ ìŠ¤íƒ€ì¼ì‹œíŠ¸ ë“± ê¸°íƒ€ ë¦¬ì†ŒìŠ¤ëŠ” ë¡œë“œ ì¤‘ì¼ ìˆ˜ ìˆë‹¤.
- `load` : DOM íŠ¸ë¦¬ê°€ ì™„ì„±ë˜ê³  ì´ë¯¸ì§€ ë“± ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ë“¤ë„ ëª¨ë‘ ë¡œë“œë˜ì—ˆì„ ë•Œ `window` ê°ì²´ì—ì„œ ë°œìƒëœë‹¤.
- `beforeunload` : ì‚¬ì´íŠ¸ë¥¼ ë– ë‚˜ë ¤ í•  ë•Œ `window` ê°ì²´ì—ì„œ ë°œìƒí•œë‹¤.
- `unload` : ì‚¬ì´íŠ¸ë¥¼ ë– ë‚  ë•Œ `window` ê°ì²´ì—ì„œ ë°œìƒí•œë‹¤.

## DOMContentLoaded

DOM íŠ¸ë¦¬ êµ¬ì„±ì´ ì™„ë£Œëœ í›„ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ í•´ë‹¹ ì´ë²¤íŠ¸ì—ì„œëŠ” ëª¨ë“  ìš”ì†Œë“¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ì´ë¯¸ì§€ë“±ì˜ ì™¸ë¶€ ìì›ì€ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ì˜ ì‚¬ì´ì¦ˆ ë“±ì€ ì•Œ ìˆ˜ ì—†ë‹¤. í•´ë‹¹ ì´ë²¤íŠ¸ëŠ” ì¼ë°˜ì ì¸ ê²½ìš° ìŠ¤í¬ë¦½íŠ¸ê°€ ëª¨ë‘ ì‹¤í–‰ëœ ë’¤ ë°œìƒí•˜ê²Œ ë˜ë©°, ë¸Œë¼ìš°ì €ì˜ ìë™ì™„ì„± ê¸°ëŠ¥ì´ DOMContentLoaded ì—ì„œ ì¼ì–´ë‚˜ê²Œ ëœë‹¤.  
addEventListener ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

> ### ğŸš¦ ì¶”ê°€ì •ë³´
>
> - async ì†ì„±ì´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ì–´ ì¶”ê°€ëœ ìŠ¤í¬ë¦½íŠ¸ëŠ” DOMContentLoaded ë¥¼ ë§‰ì§€ ì•ŠëŠ”ë‹¤.
> - ì¼ë°˜ì ìœ¼ë¡œ DOMContentLoadedëŠ” ìŠ¤íƒ€ì¼ì‹œíŠ¸ ë¡œë“œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šìœ¼ë‚˜ ìŠ¤íƒ€ì¼ì‹œíŠ¸ í•˜ë‹¨ì— ë°”ë¡œ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆì„ ê²½ìš° ìŠ¤í¬ë¦½íŠ¸ê°€ ìŠ¤íƒ€ì¼ì‹œíŠ¸ê°€ ë¡œë“œ ë˜ê¸° ì „ê¹Œì§€ ì‹¤í–‰ë˜ì§€ ì•Šì•„ì„œ ìŠ¤íƒ€ì¼ì‹œíŠ¸ì˜ ë¡œë“œ ì—­ì‹œ ê¸°ë‹¤ë¦¬ê²Œ ëœë‹¤.

```js
document.addEventListener("DOMContentLoaded", () => {
  console.log(">>>>>>>>>>>>>> DOMContentLoaded!");
});

console.log(">>>>>>>>>>>>>> Script");

// >>>>>>>>>>>>>> Script
// >>>>>>>>>>>>>> DOMContentLoaded!
```

## load

window ê°ì²´ì˜ load ì´ë²¤íŠ¸ëŠ” ìŠ¤íƒ€ì¼, ì´ë¯¸ì§€ ë“±ì˜ ë¦¬ì†ŒìŠ¤ê°€ ëª¨ë‘ ë¡œë“œ ë˜ì—ˆì„ ë•Œ ë°œìƒí•˜ë©°, window ê°ì²´ì— onload í”„ë¡œí¼í‹°ì™€ addEventListener ë¥¼ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì—ˆê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ì˜ ì‚¬ì´ì¦ˆ ë“±ì„ ì•Œ ìˆ˜ ìˆë‹¤.

```js
window.onload = () => {
  console.log(">>>>>>>>>>>>>> load!");
  const img = document.getElementById("img-id");
  alert(`>>>>>>>>>>>>>> ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ: ${img.offsetWidth}`);
};

<img id="img-id" src="https://http.cat/100" alt="100status-cat" />;

// >>>>>>>>>>>>>> load!
// >>>>>>>>>>>>>> ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ: 100
```

## beforeunload

ì‚¬ìš©ìê°€ í˜„ì¬ í˜ì´ì§€ë¥¼ ë– ë‚˜ë ¤ í•  ë•Œ window ê°ì²´ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¡œ í˜„ì¬ í˜ì´ì§€ì— ì‘ì„±ì¤‘ì¸ ë‚´ìš©ì´ ìˆì„ ê²½ìš° í•´ë‹¹ ë‚´ìš©ì´ ì‚¬ë¼ì§€ëŠ” ë“±ì˜ ì•ˆë‚´ë¥¼ í•  ë•Œ ë§ì´ ì‚¬ìš©ëœë‹¤.
`return false` ë¥¼ í†µí•´ ë¸Œë¼ìš°ì €ë³„ ê²½ê³ ì°½ì„ í™•ì¸ í•  ìˆ˜ ìˆê³  í•´ë‹¹ ì´ë²¤íŠ¸ì—ì„œ `alert`, `confirm` ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

```js
window.onbeforeunload = () => {
  console.log(">>>>>>>>>>>>>> beforeunload!");
  return false;
};
```

## unload

ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë– ë‚  ë•Œ ë°œìƒí•˜ëŠ” window ê°ì²´ì˜ ì´ë²¤íŠ¸ë¡œ íŒì—…ì°½ì„ ë‹«ëŠ” ê²ƒê³¼ ê°™ì€ ë”œë ˆì´ê°€ ì—†ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìì˜ í–‰ë™ì„ ë¶„ì„í•œ ë¶„ì„ì •ë³´ë¥¼ ë§ì´ ë³´ë‚´ëŠ”ë° ì‚¬ìš©ëœë‹¤.
`navigator.sendBeacon(url, data)` ë¥¼ í†µí•´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.

> ### ğŸš¦ navigator.sendBeacon(url, data) ì¶”ê°€ì •ë³´
>
> - ìš”ì²­ì€ POST ë©”ì„œë“œë¡œ ì „ì†¡ë¨
> - ë¬¸ìì—´ ì™¸ì— í¼ì´ë‚˜ fetchì—ì„œ ì„¤ëª…í•˜ëŠ” ê¸°íƒ€ í¬ë§·ë“¤ë„ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë‚˜ ì¼ë°˜ì ìœ¼ë¡œ ë¬¸ìì—´ í˜•íƒœì˜ ê°ì²´ê°€ ì „ì†¡ë¨
> - ì „ì†¡ ë°ì´í„°ëŠ” 64kbë¥¼ ë„˜ì„ ìˆ˜ ì—†ë‹¤.

```js
let analyticsData = { /* ë¶„ì„ ì •ë³´ê°€ ë‹´ê¸´ ê°ì²´ */ };

window.addEventListener("unload", function() {
  navigator.sendBeacon("/analytics", JSON.stringify(analyticsData));
};
```

## ì°¸ê³ ìë£Œ(ì›ë¬¸)

- [ëª¨ë˜ javascript íŠœí† ë¦¬ì–¼](https://ko.javascript.info/onload-ondomcontentloaded)

<hr/>

_ê°œì¸ì´ ì°¸ê³ í•˜ê³ ì ì‘ì„±í•œ ê¸€ì´ë©°, ì˜ëª»ëœ ì •ë³´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ëª»ëœ ì •ë³´ëŠ” ë©”ì¼ë¡œ ë³´ë‚´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤._ ğŸ™
