~~HTML ì˜ˆì œê°€ ë§ì´ ìƒëµë˜ì–´ ìˆìœ¼ë‹ˆ ì§ì ‘ ì±…ì„ ì½ì–´ë³´ì‹œê±°ë‚˜ ì‘ì„±í•´ë³´ì‹œê¸¸~~

## 40.7 ì´ë²¤íŠ¸ ìœ„ì„

ì˜ˆë¥¼ ë“¤ì–´ ul íƒœê·¸ ì•ˆì— li íƒœê·¸ê°€ 30 ì—¬ê°œ ìˆë‹¤ê³  ê°€ì •í•  ë•Œ ê° li ë¥¼ í´ë¦­ í–ˆì„ ë•Œì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•´ì•¼ë˜ëŠ”ë° ê·¸ë ‡ë‹¤ë©´ 30 ì—¬ê°œë¥¼ ë‹¤ ê±¸ì§€ ì•Šê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤. ì•ì„œì„œ ì´ë²¤íŠ¸ëŠ” ìº¡ì³ë§ê³¼ ë²„ë¸”ë§ì´ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°°ì› ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìš”ì†Œì˜ ìƒìœ„ ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.  
ì´ë²¤íŠ¸ ìœ„ì„ì´ë€ ì—¬ëŸ¬ ê°œì˜ í•˜ìœ„ DOM ìš”ì†Œì— ê°ê° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•˜ëŠ” ëŒ€ì‹  í•˜ë‚˜ì˜ ìƒìœ„ DOM ìš”ì†Œì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•˜ëŠ” ë°©ë²•ì„ ë§í•œë‹¤.

```js
const $fruits = document.getElementById("fruits");
const $msg = document.querySelector(".msg");

function activate({ target }) {
  if (!target.matches("#fruits > li")) return;
  [...$fruits.children].forEach((fruit) => {
    fruit.classList.toggle("active", fruit === target);
    $msg.textContent = target.id;
  });
}

$fruits.onclick = activate;
```

ìœ„ ì˜ˆì œì²˜ëŸ¼ ì´ë²¤íŠ¸ë¥¼ ìœ„ì„í•  ê²½ìš° ëœ»í•˜ì§€ ì•Šì€ ìì‹ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì—¬ ì˜¬ë¼ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•˜ë„ë¡ êµ¬ë³„í•˜ëŠ” ë“±ì˜ ì¶”ê°€ ì½”ë“œê°€ í•„ìš”í•˜ë‹¤.

> ìœ„ ì˜ˆì œì—ì„œëŠ” target.matches ë©”ì„œë“œì™€ ë°œìƒí•œ ì´ë²¤íŠ¸ ê°ì²´ë¡œ êµ¬ë³„í•˜ì˜€ë‹¤.  
> ì¼ë°˜ì ìœ¼ë¡œ target, currentTarget ì€ ê°™ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì˜ë¯¸í•˜ëŠ” ë°”ê°€ ë‹¤ë¥´ê³  ì‹¤ì œë¡œ ì´ë²¤íŠ¸ ìœ„ì„ë“±ì„ í•˜ë©´ ë‹¤ë¥´ë‹¤.

## 40.8 DOM ìš”ì†Œì˜ ê¸°ë³¸ ë™ì‘ ì¡°ì‘

### 40.8.1 DOM ìš”ì†Œì˜ ê¸°ë³¸ ë™ì‘ ì¤‘ë‹¨

DOM ìš”ì†ŒëŠ” ì €ë§ˆë‹¤ ê¸°ë³¸ ë™ì‘ì´ ìˆê³  ì´ë²¤íŠ¸ ê°ì²´ì˜ `preventDefault` ë©”ì„œë“œëŠ” ì´ëŸ¬í•œ DOM ìš”ì†Œì˜ ê¸°ë³¸ ë™ì‘ì„ ì¤‘ë‹¨ì‹œí‚¨ë‹¤.

```js
document.getElementsByTagName('a')[0]?.onclick = e => {
  e.preventDefault();
}
```

### 40.8.2 ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€

ì´ë²¤íŠ¸ ê°ì²´ì˜ `stopPropagation` ë©”ì„œë“œëŠ” ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì¤‘ë‹¨ ì‹œí‚¨ë‹¤. ìì‹ ì´ ë°›ì€ ì´ë²¤íŠ¸ì˜ ì „íŒŒë¥¼ ì¤‘ë‹¨ ì‹œí‚¨ë‹¤.

> ìº¡ì³ë§ ë‹¨ê³„ì—ì„œë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.

```js
document.querySelector(".container").addEventListener(
  "click",
  function (e) {
    e.stopPropagation();
    console.log("Container");
  },
  true
);
document.querySelector(".btn1").addEventListener("click", function (e) {
  e.stopPropagation();
  console.log("Button1");
});
```

## 40.9 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ë¶€ì˜ this

### 40.9.1 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì–´íŠ¸ë¦¬ë·°íŠ¸ ë°©ì‹

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì–´íŠ¸ë¦¬ë·°íŠ¸ ê°’ìœ¼ë¡œ ì§€ì •í•œ ë¬¸ìì—´ì´ ì‚¬ì‹¤ ì•”ë¬µì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ë¬¸ì´ë¼ê³  ì•ì„œì„œ ì–¸ê¸‰í•˜ì˜€ë‹¤.  
ë”°ë¼ì„œ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œì´ ë˜ê³  ì¼ë°˜ì ì¸ ê²½ìš° this ëŠ” window ê°ì²´(ì „ì—­ ê°ì²´)ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ì§€ë§Œ ì¸ìˆ˜ë¡œ this ë¥¼ ì „ë‹¬í•  ê²½ìš° ì´ë²¤íŠ¸ë¥¼ ë°”ì¸ë”©í•œ DOM ìš”ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤.

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <button class="btn1" onclick="handleClick1()">Button1</button>
      <button class="btn1" onclick="handleClick2(this)">Button2</button>
    </div>
    <script>
      function handleClick1() {
        console.log(this); // window
      }
      function handleClick2(button) {
        console.log(button);
        // <button class="btn1" onclick="handleClick2(this)">Button2</button>
        console.log(this); // window
      }
    </script>
  </body>
</html>
```

### 40.9.2 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹° ë°©ì‹ê³¼ addEventListener ë©”ì„œë“œ ë°©ì‹

ë‘ ë°©ì‹ ëª¨ë‘ this ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°”ì¸ë”©í•œ DOM ìš”ì†Œë¥¼ ê°€ë¦¬í‚¤ì§€ë§Œ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•  ê²½ìš° this ëŠ” í•¸ë“¤ëŸ¬ ìƒìœ„ ìŠ¤ì½”í”„ì˜ this ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

> ì¼ë°˜ í•¨ìˆ˜ë¡œ ë“±ë¡í•  ê²½ìš° this ëŠ” currentTarget í”„ë¡œí¼í‹°ì™€ ë™ì¼í•˜ë‹¤.

```js
$button1.onclick = function (e) {
  console.logt(e.currentTarget); // $button1
  console.log(this); // $button1
};
$button2.addEventListener("click", function (e) {
  console.logt(e.currentTarget); // $button2
  console.log(this); // $button2
});
```

í´ë˜ìŠ¤ì—ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ê²½ìš°ëŠ” this ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.

```js
class App {
  constructor() {
    this.$button = document.querySelector(".button");
    this.$button.onclick = this.increase;
  }

  increase() {
    console.log(this); // this.$button ê°€ë¦¬í‚¨ë‹¤.
  }
}
```

ì´ ì˜ˆì œì²˜ëŸ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ë¶€ì˜ this ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°”ì¸ë”©í•œ DOM ìš”ì†Œë¥¼ ê°€ë¦¬í‚¤ê¸° ë•Œë¬¸ì— increase ì— ë°”ì¸ë”©ëœ this ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ë‹ˆë¼ this.$button ì— ë°”ì¸ë”©ëœë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë‚˜ bind í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ìˆë‹¤.

```js
class App {
  constructor() {
    this.$button = document.querySelector(".button");
    this.$button.onclick = this.increase;

    // 1. this ê°€ ì¸ìŠ¤í„´ìŠ¤ì— ë°”ì¸ë”© ë˜ë„ë¡ ì„¤ì •
    this.$button.onclick = this.increase.bind(this);
  }

  // 2. í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©
  increase = (e) => {
    console.log(this);
  };
}
```

> addEventListener ë°©ì‹ë„ ìœ„ì™€ ê°™ì€ í˜„ìƒì´ ìˆë‹¤.

## 40.10 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì¸ìˆ˜ ì „ë‹¬

í•¸ë“¤ëŸ¬ ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ í•¸ë“¤ëŸ¬ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

```js
const MIN_USER_NAME_LENGTH = 5;
const $input = document.getElementById("input");
const $msg = document.querySelector(".msg");

// 1.
const checkUserNameLength = (min) => {
  $msg.textContent = $input.value.length < min ? "ê¸¸ì´ê°€ ëª¨ìëë‹ˆë‹¤" : "";
};
$input.onblur = () => checkUserNameLength(MIN_USER_NAME_LENGTH);

// 2.
const checkUserNameLength = (min) => (e) => {
  $msg.textContent = $input.value.length < min ? "ê¸¸ì´ê°€ ëª¨ìëë‹ˆë‹¤" : "";
};
$input.onblur = checkUserNameLength(MIN_USER_NAME_LENGTH);
```

## 40.11 ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸

### 40.11.1 ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ìƒì„±

ì´ë²¤íŠ¸ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ëª…ì‹œì ìœ¼ë¡œ ì´ë²¤íŠ¸ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê³  ì„ì˜ì˜ ì´ë²¤íŠ¸ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ê°œë°œìì˜ ì˜ë„ë¡œ ìƒì„±ëœ ì´ë²¤íŠ¸ë¥¼ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ë¼ê³  í•œë‹¤.  
ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì´ë²¤íŠ¸ íƒ€ì…ì„ ë¬¸ìì—´ë¡œ ë„˜ê²¨ì£¼ë©° ìƒˆë¡œìš´ ì´ë²¤íŠ¸ íƒ€ì…ì„ ì§€ì •í•˜ê±°ë‚˜ ê¸°ë“±ë¡ë˜ì–´ ìˆëŠ” ì´ë²¤íŠ¸ë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

ìƒì„±ëœ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ê°ì²´ëŠ” ë²„ë¸”ë§ë˜ì§€ ì•Šìœ¼ë©° preventDefault ë©”ì„œë“œë¡œ ì·¨ì†Œê°€ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ ë‘ ë²ˆì§¸ ì¸ìˆ˜ì— í•´ë‹¹ í”„ë¡œí¼í‹°ì— ëŒ€í•œ ì„¤ì •ì„ ê°€ì§€ëŠ” ê°ì²´ë¥¼ ì „ë‹¬í•˜ë©´ ë˜ë©° ì´ ê°ì²´ì—ëŠ” ì´ë²¤íŠ¸ íƒ€ì…ì— ë”°ë¼ ê°€ì§€ëŠ” ê³ ìœ ì˜ í”„ë¡œí¼í‹°ê°€ ì €ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.

**ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ëŠ” isTrusted í”„ë¡œí¼í‹°ëŠ” í•­ìƒ false ì´ê³  2ë²ˆì§¸ ì¸ìˆ˜ë¡œ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.**

> ìƒˆë¡œìš´ ì´ë²¤íŠ¸ íƒ€ì…ì„ ë“±ë¡í•˜ëŠ” ê²½ìš°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ CustomEvent ì´ë²¤íŠ¸ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

```js
const keyboardEvent = new KeyboardEvent("keyup");
console.log(keyboardEvent.type); // keyup
console.log(keyboardEvent.bubbles); // keyup
console.log(keyboardEvent.cancelable); // keyup

const customEvent = new CustomEvent("foo");
console.log(customEvent.type); // foo

const mouseCustomEvent = new MouseEvent("click", {
  bubbles: true,
  cancelable: true,
  clientX: 50,
  clientY: 100,
  isTrusted: true,
});
console.log(mouseCustomEvent.type); // click
console.log(mouseCustomEvent.bubbles); // true
console.log(mouseCustomEvent.cancelable); // true
console.log(mouseCustomEvent.clientX); // 50
console.log(mouseCustomEvent.isTrusted); // false
```

### 40.11.2 ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë””ìŠ¤íŒ¨ì¹˜

ìƒì„±í•œ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ëŠ” `dispatchEvent` ë©”ì„œë“œë¡œ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. ë˜í•œ CustomEvent ìƒì„±í•  ë•Œ ë‘ ë²ˆì§¸ ì¸ìˆ˜ì— `detail` í”„ë¡œí¼í‹°ì— ì›í•˜ëŠ” ì •ë³´ë¥¼ ë‹´ì€ ê°ì²´ë¥¼ ë„£ì–´ì„œ ë°œìƒ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <button class="btn1">Button1</button>
    </div>
    <script>
      const $button = document.querySelector(".btn1");

      $button.addEventListener("click", (e) => {
        console.log(e);
        // MouseEventÂ {isTrusted: false, screenX: 0, screenY: 0,Â â€¦}
      });
      $button.addEventListener("foo", (e) => {
        console.log(e.detail.message); // Hi
      });

      const customMouseEvent = new MouseEvent("click");
      $button.dispatchEvent(customMouseEvent);
      const customFooEvent = new CustomEvent("foo", {
        detail: { message: "Hi" },
      });
      $button.dispatchEvent(customFooEvent);
    </script>
  </body>
</html>
```

> ğŸ’¿&nbsp; ì„ì˜ì˜ ì´ë²¤íŠ¸ íƒ€ì…ì€ í”„ë¡œí¼í‹°ë‚˜ ì–´ë¸Œë¦¬ë·°íŠ¸ ë°©ì‹ì„ ì“¸ ìˆ˜ ì—†ë‹¤. í•´ë‹¹í•˜ëŠ” ì´ë²¤íŠ¸ê°€ ìš”ì†Œì— ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸

# 41. íƒ€ì´ë¨¸

## 41.1 í˜¸ì¶œ ìŠ¤ì¼€ì¤„ë§

í•¨ìˆ˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ê°€ ì¦‰ì‹œ ì‹¤í–‰ëœë‹¤. ì´ë¥¼ ì¼ì • ì‹œê°„ì´ ê²½ê³¼ëœ í›„ì— ì‹¤í–‰ ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´ íƒ€ì´ë¨¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë° ì´ë¥¼ **í˜¸ì¶œ ìŠ¤ì¼€ì¤„ë§**ì´ë¼ í•œë‹¤.  
ì´ëŸ¬í•œ íƒ€ì´ë¨¸ í•¨ìˆ˜ëŠ” ECMAScript ìŠ¤í™ì´ ì•„ë‹ˆë©° ë¸Œë¼ìš°ì €ì™€ ë…¸ë“œ í™˜ê²½ì—ì„œ ì „ì—­ ê°ì²´ì˜ ë©”ì„œë“œë¡œ ì œê³µí•˜ëŠ” í˜¸ìŠ¤íŠ¸ ê°ì²´ì´ë‹¤.

> ğŸ’¿&nbsp;ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ë‹¨ í•˜ë‚˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì„ ê°–ê¸° ë•Œë¬¸ì— ë‘ ê°€ì§€ ì´ìƒì˜ íƒœìŠ¤í¬ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.(ì‹±ê¸€ìŠ¤ë ˆë“œ) ë”°ë¼ì„œ íƒ€ì´ë¨¸ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

## 41.2 íƒ€ì´ë¨¸ í•¨ìˆ˜

### 41.2.1 setTimeout / clearTimeout

ì„¤ì •í•œ ì‹œê°„ ë’¤ ì— í•œ ë²ˆë§Œ í˜¸ì¶œ ë˜ëŠ” í•¨ìˆ˜

```js
const timeoutId = setTimeout(func|code[, delay, param1, parma2, ...])
```

setTimeout í•¨ìˆ˜ëŠ” ìƒì„±ëœ íƒ€ì´ë¨¸ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆëŠ” id ë¥¼ ë°˜í™˜í•˜ê³  ë¸Œë¼ìš°ì €ì˜ ê²½ìš° ìˆ«ì ë…¸ë“œì˜ ê²½ìš° ê°ì²´ë¥¼ ë°˜í™˜í•˜ë‹¤. ì´ id ë¥¼ clearTimeout ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ì˜ ê²½ìš° íƒ€ì´ë¨¸ë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆë‹¤.

```js
const timerId = setTimeout((name) => console.log(`Hi ${name}`), 1000, "SEO");
clearTimeout(timerId);
```

### 41.2.2 setInterval / clearInterval

ì„¤ì •í•œ íƒ€ì´ë¨¸ ì‹œê°„ ê°’ ë§ˆë‹¤ ë°˜ë³µ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì´ë©° ê·¸ ì™¸ ì‚¬í•­ì€ setTimeout ê³¼ ìœ ì‚¬í•˜ë‹¤.

```js
const timeoutId = setInterval(func|code[, delay, param1, parma2, ...])
```

```js
let count = { i: 0 };

const timerId = setInterval(
  (count) => {
    console.log(count.i++);
    if (count.i > 5) {
      clearInterval(timerId);
    }
  },
  500,
  count
);
```

### 41.3 ë””ë°”ìš´ìŠ¤ì™€ ìŠ¤ë¡œí‹€

`scroll`, `resize`, `input`, `mousemove` ì™€ ê°™ì€ ì´ë²¤íŠ¸ëŠ” ì§§ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ì—°ì†í•´ì„œ ë°œìƒí•œë‹¤. ì´ì— ë°”ì¸ë”©ëœ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ê³¼ë„í•˜ê²Œ í˜¸ì¶œë˜ì–´ ì„±ëŠ¥ì— ë¬¸ì œì„ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. ë””ë°”ìš´ìŠ¤ì™€ ìŠ¤ë¡œí‹€ì€ ì´ëŸ¬í•œ ê³¼ë„í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ í˜¸ì¶œì„ ë°©ì§€í•˜ëŠ” ê¸°ë²•ì´ë‹¤.

```js
const debounce = (func, delay) => {
  let timerId;
  return (event) => {
    if (timerId) {
      clearTimeout(timerId);
    }
    timerId = setTimeout(func, delay, event);
  };
};

const throttle = (func, dealy) => {
  let timerId;
  return (event) => {
    if (timerId) {
      return;
    }
    timerId = setTimeout(() => {
      func(event);
      timerId = null;
    }, delay);
  };
};
```

### 41.3.1 ë””ë°”ìš´ìŠ¤

ì§§ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ì—°ì†í•´ì„œ ë°œìƒí•˜ë©´ ì¸ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šë‹¤ê³  ì¼ì • ì‹œê°„ì´ ê²½ê³¼í•  ë•Œê¹Œì§€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©´ ì´ë²¤íŠ¸ê°€ í•¸ë“¤ëŸ¬ê°€ í•œ ë²ˆë§Œ í˜¸ì¶œí•˜ë„ë¡ í•˜ëŠ” ê¸°ë²•ì´ë‹¤.

> ìë™ì™„ì„± UI, ë²„íŠ¼ ì¤‘ë³µ í´ë¦­ ë°©ì§€, resize ì´ë²¤íŠ¸ ë“±ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©

### 41.3.2 ìŠ¤ë¡œí‹€

ì§§ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ì—°ì†í•´ì„œ ë°œìƒí•˜ë”ë¼ë„ ì¼ì • ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í•œë²ˆì”©ë§Œ í˜¸ì¶œí•˜ëŠ” ê¸°ë²•ì´ë‹¤.

> scroll, ë¬´í•œ ìŠ¤í¬ë¡¤ UI êµ¬í˜„ ë“±ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©

# 42. ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°

## 42.1 ë™ê¸° ì²˜ë¦¬ì™€ ë¹„ë™ê¸° ì²˜ë¦¬

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ë‹¨ í•˜ë‚˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì„ ê°–ëŠ”ë‹¤. ì´ëŠ” í•¨ìˆ˜ê°€ ì‹¤í–‰ í•  ìˆ˜ ìˆëŠ” ì°½êµ¬ê°€ 1ê°œì´ë©° 2ê°œ ì´ìƒì˜ í•¨ìˆ˜ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.  
ì´ì²˜ëŸ¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ í•œ ë²ˆì— í•˜ë‚˜ì˜ íƒœìŠ¤í¬ë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.  
í•˜ë‚˜ì˜ íƒœìŠ¤í¬ê°€ ì‘ì—…ì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ë’¤ì— ì‘ì—…ë“¤ì€ ëŒ€ê¸° ìƒíƒœì— ìˆëŠ”ë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì„ `ë™ê¸° ì²˜ë¦¬`ë¼ê³  í•˜ë©°, ì•ì„œ ì‚¬ìš©í•œ íƒ€ì´ë¨¸ í•¨ìˆ˜ë“¤ì˜ ê²½ìš° ë’¤ì˜ ì‘ì—…ë“¤ì´ ëŒ€ê¸° ìƒíƒœì— ìˆì§€ ì•Šê³  ì‹¤í–‰ëœë‹¤. ì´ë¥¼ `ë¹„ë™ê¸° ì²˜ë¦¬`ë¼ê³  í•œë‹¤.

```js
function foo() {
  console.log("foo");
}
function bar() {
  console.log("bar");
}

function sleep(func, delay) {
  const delayUntil = Date.now() + delay;

  while (Date.now() < delayUntil);
  func();
}

sleep(foo, 3000);
bar();
// foo -> bar

setTimeout(foo, 3000);
bar();
// bar -> foo
```

íƒ€ì´ë¨¸ í•¨ìˆ˜, HTTP ìš”ì²­, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” ì´ë²¤íŠ¸ ë£¨í”„ì™€ íƒœìŠ¤í¬ íì™€ ê¹Šì€ ê´€ê³„ê°€ ìˆë‹¤.

## 42.2 ì´ë²¤íŠ¸ ë£¨í”„ì™€ íƒœìŠ¤íŠ¸ í

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ í•˜ë‚˜ì˜ ì‘ì—…ë°–ì— í•˜ì§€ ëª»í•œë‹¤ê³  ì•ì„œ ë§í•˜ì˜€ìœ¼ë‚˜ ì‹¤ì œë¡œ ë¸Œë¼ìš°ì €ë¥¼ ë³´ë©´ ë™ì‹œì— ì²˜ë¦¬ë˜ëŠ” ê²ƒ ì²˜ëŸ¼ ëŠê»´ì§€ëŠ”ë° ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë™ì‹œì„±ì„ ì§€ì›í•˜ëŠ” ê²ƒì´ `ì´ë²¤íŠ¸ ë£¨í”„`ì´ë‹¤.

ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ë¸Œë¼ìš°ì €ì— ë‚´ì¥ë˜ì–´ ìˆëŠ” ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì´ë©°, ë°°ê²½ ì„¤ëª…ìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ë“¤ ëŒ€ë¶€ë¶„ì€ 2ê°œ ì˜ì—­ì„ ë‚˜ë‰œë‹¤.

- `ì½œ ìŠ¤íƒ`: ì†ŒìŠ¤ì½”ë“œ í‰ê°€ ê³¼ì •ì—ì„œ ìƒì„±ëœ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¶”ê°€ë˜ê³  ì œê±°ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ

- `í™`: ê°ì²´ê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„. ì½œ ìŠ¤íƒì˜ ìš”ì†Œì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” í™ì— ì €ì¥ëœ ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.

ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ì†ŒìŠ¤ì½”ë“œì˜ í‰ê°€ì™€ ì‹¤í–‰ì„ ì œì™¸í•œ ëª¨ë“  ì²˜ë¦¬ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì„ êµ¬ë™í•˜ëŠ” í™˜ê²½(ë¸Œë¼ìš°ì €, ë…¸ë“œ)ì—ì„œ ë‹´ë‹¹í•œë‹¤.  
ì´ë¥¼ ìœ„í•´ ë¸Œë¼ìš°ì € í™˜ê²½ì€ íƒœìŠ¤í¬ íì™€ ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì œê³µí•œë‹¤.

- `íƒœìŠ¤í¬ í`: ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì¼ì‹œì ìœ¼ë¡œ ë³´ê´€ë˜ëŠ” ì˜ì—­ì´ë‹¤. íƒœìŠ¤í¬ íì™€ëŠ” ë³„ë„ë¡œ í”„ë¡œë¯¸ìŠ¤ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ê°€ ì¼ì‹œì ìœ¼ë¡œ ë³´ê´€ë˜ëŠ” ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íë„ ì¡´ì¬í•œë‹¤.

- `ì´ë²¤íŠ¸ ë£¨í”„`: ì½œ ìŠ¤íƒì— í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ ê·¸ë¦¬ê³  íƒœìŠ¤í¬ íì— ëŒ€ê¸° ì¤‘ì¸ í•¨ìˆ˜ê°€ ìˆëŠ”ì§€ ë°˜ë³µí•´ì„œ í™•ì¸í•œë‹¤. ì½œ ìŠ¤íƒì´ ë¹„ì–´ìˆê³  íƒœìŠ¤í¬ íì— ëŒ€ê¸° ì¤‘ì¸ í•¨ìˆ˜ê°€ ìˆë‹¤ë©´ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ìˆœì°¨ì ìœ¼ë¡œ íƒœìŠ¤í¬ íì— ëŒ€ê¸° ì¤‘ì¸ í•¨ìˆ˜ë¥¼ ì½œ ìŠ¤íƒìœ¼ë¡œ ì´ë™ì‹œí‚¨ë‹¤.

```js
function foo() {
  console.log("foo");
}
function bar() {
  console.log("bar");
}

// ì§€ì—°ì‹œê°„ì„ 0ìœ¼ë¡œ í•˜ì—¬ë„ 4ms ìµœì†Œ ì§€ì—° ì‹œê°„ì„ ê°–ëŠ”ë‹¤.
setTimeout(foo, 0);
bar();
```

ìœ„ ì˜ˆì œê°€ ì‹¤í–‰ë˜ëŠ” ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.

1. ì „ì—­ì½”ë“œê°€ í‰ê°€ë˜ì–´ ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³  ì½œ ìŠ¤íƒì— í‘¸ì‰¬ëœë‹¤.
2. ì „ì—­ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸° ì‹œì‘í•˜ì—¬ setTimeout í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  ì´ ì‹¤í–‰ ì»¨íƒìŠ¤íŠ¸ê°€ ì½œìŠ¤íƒì— í‘¸ì‰¬ë˜ê³  ì‹¤í–‰ ì¤‘ì¸ ì»¨íƒìŠ¤íŠ¸ê°€ ëœë‹¤.
3. ì½œë°±í•¨ìˆ˜ë¥¼ ìŠ¤ì¼€ì¤„ë§í•˜ê³  ì¢…ë£Œë˜ì–´ ì½œ ìŠ¤íƒì—ì„œ íŒëœë‹¤. ì´ë•Œ í˜¸ì¶œ ìŠ¤ì¼€ì¤„ë§(íƒ€ì´ë¨¸ ì„¤ì •)ê³¼ ë§Œë£Œ ì‹œ ì½œë°± í•¨ìˆ˜ë¥¼ íƒœìŠ¤í¬ íì— í‘¸ì‰¬í•˜ëŠ” ê²ƒì€ ë¸Œë¼ìš°ì €ì˜ ì—­í• ì´ë‹¤.
4. ë¸Œë¼ìš°ì €ì˜ 4-1, ìë°”ìŠ¤í¬ë¦½íŠ¸ 4-2 ê°€ ë³‘í–‰ì²˜ë¦¬ëœë‹¤.  
   4-1. ë¸Œë¼ìš°ì €ëŠ” íƒ€ì´ë¨¸ ì„¤ì • ë° ë§Œë£Œë¥¼ ê¸°ë‹¤ë¦¬ê³  ë§Œë£Œë˜ë©´ ì½œë°±í•¨ìˆ˜ foo ë¥¼ íƒœìŠ¤í¬ íë¡œ í‘¸ì‰¬í•˜ê³  foo í•¨ìˆ˜ëŠ” ëŒ€ê¸°í•œë‹¤.  
   4-2. bar í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ ì‹¤í–‰ ì»¨íƒìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³  í‘¸ì‰¬ë˜ì–´ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ ì»¨íƒìŠ¤íŠ¸ê°€ ë˜ê³  ì¢…ë£Œë˜ì–´ íŒëœë‹¤.
5. ì „ì—­ì½”ë“œ ì‹¤í–‰ì´ ì¢…ë£Œë˜ê³  ì „ì—­ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ì½œ ìŠ¤íƒì—ì„œ íŒëœë‹¤. ì´ì œ ì½œ ìŠ¤íƒì— ì•„ë¬´ëŸ° ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì—†ê²Œ ëœë‹¤.
6. ì´ë²¤íŠ¸ ë£¨í”„ì— ì˜í•´ ì½œ ìŠ¤íƒì´ ë¹„ì–´ìˆìŒì„ ê°ì§€ë˜ê³  íƒœìŠ¤í¬ íì—ì„œ ëŒ€ê¸°ì¤‘ì¸ ì½œë°± í•¨ìˆ˜ foo ê°€ ì´ë²¤íŠ¸ ë£¨í”„ì— ì˜í•´ì„œ ì½œ ìŠ¤íƒì— í‘¸ì‰¬ ëœë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ ì´ëŠ” ë¸Œë¼ìš°ì €ì— ë‚´ì¥ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´ ì‹±ê¸€ ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì´ë©°, ë¸Œë¼ìš°ì €ëŠ” ë©€í‹° ìŠ¤ë ˆë“œë¡œ ë™ì‘í•œë‹¤.

# 43. Ajax

## 43.1 Ajax ë€?

ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì—ê²Œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³ , ì„œë²„ê°€ ì‘ë‹µí•œ ë°ì´í„°ë¥¼ ì‰°í•˜ì—¬ ì›¹í˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ì´ë‹¤.

`Ajax` ëŠ” Web API ì¸ Http ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•œ ë©”ì„œë“œì™€ í”„ë¡œí¼í‹°ë¥¼ ì œê³µí•˜ëŠ” `XMLHttpRequest` ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.

ê³¼ê±°ì—ëŠ” ì™„ì „í•œ HTMLì„ ì„œë²„ë¡œë¶€í„° ì „ì†¡ ë°›ì•„ ì›¹í˜ì´ì§€ ì „ì²´ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ëœë”ë§í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì˜€ê³  ì´ëŸ° ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ì€ ë‹¨ì ì„ ì§€ë‹ˆê³  ìˆì—ˆë‹¤.

1. ë¶ˆí•„ìš”í•œ ë°ì´í„° í†µì‹ 
2. ì „ì²´ë¥¼ ëœë”ë§í•˜ë¯€ë¡œ í™”ë©´ì˜ ê¹œë¹¡ì„ì´ ë°œìƒí•œë‹¤.
3. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì™€ì˜ í†µì‹ ì´ ë™ê¸°ì‹ìœ¼ë¯€ë¡œ ì„œë²„ ì‘ë‹µ ì „ê¹Œì§€ ë¸”ë¡œí‚¹ ì²˜ë¦¬ ëœë‹¤.

Ajax ë¥¼ ì‚¬ìš©í•  ê²½ìš° ìœ„ì˜ ë°©ì‹ì— ë¹„í•´ ë‹¤ìŒê³¼ ì¥ì ì´ ìˆì—ˆë‹¤.

1. ë¶ˆí•„ìš”í•œ ë°ì´í„° ë°œìƒ X
2. ë³€ê²½ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œ ëœë”ë§
3. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë¸”ë¡œí‚¹ì´ ë°œìƒí•˜ì§€ ì•ŠìŒ

## 43.2 JSON

í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ HTTP í†µì‹ ì„ ìœ„í•œ í…ìŠ¤íŠ¸ ë°ì´í„° í¬ë§·ì´ë©° ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ” ì–¸ì–´ ë…ë¦½í˜• ë°ì´í„° í¬ë§·ìœ¼ë¡œ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### 43.2.1 JSON í‘œê¸° ë°©ì‹

í‚¤ì™€ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ ìˆœìˆ˜ í…ìŠ¤íŠ¸, í‚¤ì™€ ë¬¸ìì—´ì€ ë°˜ë“œì‹œ í° ë”°ì˜´í‘œ `"` ë¡œ ë¬¶ì–´ì•¼ í•œë‹¤.

```js
{
  "name": "Seo",
  "age": 20,
  "hobby": ["Piano"]
}
```

### 43.2.2 JSON.stringify

JSON.stringify ë©”ì„œë“œëŠ” ê°ì²´ë¥¼ JSON í¬ë§·ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ê°ì²´ë¥¼ ì „ì†¡í•˜ë ¤ë©´ ê°ì²´ë¥¼ ë¬¸ìì—´í™”í•´ì•¼ í•˜ëŠ”ë° ì´ë¥¼ `ì§ë ¬í™”`ë¼ê³  í•œë‹¤.

```js
JSON.stringify(value[, replacer[, space]])
```

```js
const person = {
  name: "Seo",
  age: 20,
  hobby: ["Piano"],
};

const json = JSON.stringify(person, null, 2);
console.log(typeof json, json);

function filter(key, value) {
  return typeof value === "number" ? undefined : value;
}
const filteredJson = JSON.stringify(person, filter, 2);
console.log(typeof filteredJson, filteredJson);
```

### 43.2.3 JSON.parse

JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤. ë¬¸ìì—´ì„ ê°ì²´ë¡œì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ê°ì²´í™”í•˜ëŠ”ë° ì´ë¥¼ `ì—­ì§ë ¬í™”`ë¼ê³  í•œë‹¤.

```js
JSON.parse(text[, reviver])
```

```js
const doubleObj = JSON.parse('{"p": 5, "name": "SEO"}', (key, value) =>
  typeof value === "number" ? value * 2 : value
);
console.log(doubleObj); // {p: 10, name: 'SEO'}
```

## 43.3 XMLHttpRequest

ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ HTTP ìš”ì²­ì„ ì „ì†¡í•˜ë ¤ë©´ XMLHttpRequest ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤.

### 43.3.1 XMLHttpRequest ê°ì²´ ìƒì„±

ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒì„±í•œë‹¤. ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤.(Web API)

### 43.3.2 XMLHttpRequest ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œ

#### í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°

- readyState
- status
- statusText
- responseType
- response
- responseText

#### ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°

- onreadystatechange
- onloadstart
- onprogress
- onabort
- onerror
- onload
- ontimeout
- onloaded

#### ë©”ì„œë“œ

- open
- send
- abort
- setRequestHeader
- getResponseHeader

#### ì •ì  í”„ë¡œí¼í‹°

- UNSENT
- OPENED
- HEADERS_RECEIVED
- LOADING
- DONE

### 43.3.3 HTTP ìš”ì²­ ì „ì†¡

ìš”ì²­ì„ ì „ì†¡í•˜ëŠ” ê²½ìš° ë‹¤ìŒ ìˆœì„œë¥¼ ë”°ë¥¸ë‹¤.

1. XMLHttpRequest.prototype.open ë©”ì„œë“œë¡œ HTTP ë©”ì„œë“œ ìš”ì²­ì„ ì´ˆê¸°í™”í•œë‹¤.
2. í•„ìš”ì— ë”°ë¼ íŠ¹ì • HTTP ìš”ì²­ì˜ í—¤ë” ê°’ì„ ì„¤ì •í•œë‹¤.
3. XMLHttpRequest.prototype.send ë©”ì„œë“œë¡œ HTTP ìš”ì²­ì„ ì „ì†¡í•œë‹¤.

```js
const xhr = new XMLHttpRequest();

xhr.open("GET", "/users");
xhr.setRequestHeader("content-type", "application/json");
xhr.send();
```

#### XMLHttpRequest.prototype.open

ì„œë²„ì— ì „ì†¡í•  HTTP ìš”ì²­ì„ ì´ˆê¸°í™”í•œë‹¤.

```js
xhr.open(method, url[, async])
```

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì¢…ë¥˜</th>
      <th>ëª©ì </th>
      <th>í˜ì´ë¡œë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GET</td>
      <td>index/retrieve</td>
      <td>ëª¨ë“ /íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì·¨ë“</td>
      <td>X</td>
    </tr>
    <tr>
      <td>POST</td>
      <td>create</td>
      <td>ë¦¬ì†ŒìŠ¤ ìƒì„±</td>
      <td>O</td>
    </tr>
    <tr>
      <td>PUT</td>
      <td>replace</td>
      <td>ë¦¬ì†ŒìŠ¤ ì „ì²´ êµì²´</td>
      <td>O</td>
    </tr>
    <tr>
      <td>PATCH</td>
      <td>modify</td>
      <td>ë¦¬ì†ŒìŠ¤ ì¼ë¶€ êµì²´</td>
      <td>O</td>
    </tr>
    <tr>
      <td>DELETE</td>
      <td>delete</td>
      <td>ëª¨ë“ /íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì‚­ì œ</td>
      <td>X</td>
    </tr>
  </tbody>
</table>

#### XMLHttpRequest.prototype.send

open ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ëœ HTTP ìš”ì²­ì„ ì„œë²„ì— ì „ì†¡í•œë‹¤. ìš”ì²­ ë©”ì„œë“œì— ë”°ë¼ ì „ì†¡ ë°©ì‹ì— ì°¨ì´ê°€ ìˆë‹¤.  
ìš”ì²­ ëª¸ì²´ì— í˜ì´ë¡œë“œë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ”ë° ê°ì²´ì¸ ê²½ìš° ì§ë ¬í™”ë¥¼ ë°˜ë“œì‹œ í•´ì¤˜ì•¼ í•œë‹¤. ìš”ì²­ ë©”ì„œë“œê°€ GET ì¼ ê²½ìš°ëŠ” ë¬´ì‹œë˜ê³  null ë¡œ ì„¤ì •ì´ ëœë‹¤.

```js
xhr.send(JSON.stringify({ id: 1, content: "HTML" }));
```

#### XMLHttpRequest.prototype.setRequestHeader

íŠ¹ì • HTTP ìš”ì²­ì˜ í—¤ë”ë¥¼ ì„¤ì •í•œë‹¤. ë°˜ë“œì‹œ open ì´í›„ì— í˜¸ì¶œí•´ì•¼ ëœë‹¤.

```js
const xhr = new XMLHttpRequest();

xhr.open("POST", "/users");
xhr.setRequestHeader("content-type", "application/json");
// accept ë¯¸ì„¤ì • ì‹œ */* ë¡œ ì „ì†¡
xhr.setRequestHeader("accept", "application/json");
xhr.send(JSON.stringify({ id: 1, content: "HTML" }));
```

### 43.3.4 HTTP ì‘ë‹µì²˜ë¦¬

ì‘ë‹µì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” XMLHttpRequest ê°ì²´ê°€ ë°œìƒì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```js
const xhr = new XMLHttpRequest();

xhr.open("GET", "https://jsonplaceholder.typicode.com/todos/1");
xhr.send();

// ì‘ë‹µì²˜ë¦¬, load ì´ë²¤íŠ¸ë¡œë„ ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.
xhr.onreadystatechange = () => {
  if (xhr.readyState !== XMLHttpRequest.DON) {
    return;
  }
  if (xhr.status === 200) {
    console.log(JSON.parse(xhr.response));
  } else {
    console.error("Error", xhr.status, xhr.statusText);
  }
};
```

# 44. REST API

**RESTëŠ” HTTP ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì„ ê·œì •í•œ ì•„í‚¤í…ì²˜**ì´ê³ , REST API ëŠ” REST ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„œë¹„ìŠ¤ API ë¥¼ êµ¬í˜„í•œ ê²ƒì„ ì˜ë¯¸í•œë‹¤.

## 44.1 REST API êµ¬ì„±

`ìì›`, `í–‰ìœ„`, `í‘œí˜„` 3ê°€ì§€ ìš”ì†Œë¡œ êµ¬ì„±ëœë‹¤. REST ëŠ” ìì²´ í‘œí˜„ êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ REST API ë§Œìœ¼ë¡œ HTTP ìš”ì²­ì˜ ë‚´ìš©ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤.

<table>
  <thead>
    <tr>
      <th>êµ¬ì„± ìš”ì†Œ</th>
      <th>ë‚´ìš©</th>
      <th>í‘œí˜„ ë°©ë²•</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ìì›</td>
      <td>ìì›</td>
      <td>URI(ì—”ë“œí¬ì¸íŠ¸)</td>
    </tr>
    <tr>
      <td>í–‰ìœ„</td>
      <td>ìì›ì— ëŒ€í•œ í–‰ìœ„</td>
      <td>HTTP ìš”ì²­ ë©”ì„œë“œ</td>
    </tr>
    <tr>
      <td>í‘œí˜„</td>
      <td>ìì›ì— ëŒ€í•œ í–‰ìœ„ì˜ êµ¬ì²´ì  ë‚´ìš©</td>
      <td>í˜ì´ë¡œë“œ</td>
    </tr>
  </tbody>
</table>

## 44.2 REST API ì„¤ê³„ ì›ì¹™

1. URI ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ í‘œí˜„í•˜ëŠ”ë° ì§‘ì¤‘
   - ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì´ë¦„ì€ ë™ì‚¬ë³´ë‹¤ ëª…ì‚¬ë¥¼ ì‚¬ìš©
2. í–‰ìœ„ì— ëŒ€í•œ ì •ì˜ëŠ” HTTP ìš”ì²­ ë©”ì„œë“œë¥¼ í†µí•´ì„œ
   - ì£¼ë¡œ 5ê°€ì§€ ìš”ì²­ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©° í–‰ìœ„ëŠ” URI ë¡œ í‘œí˜„í•˜ì§€ ì•ŠëŠ”ë‹¤.

```sh
# bad
GET /todos/delete/1
GET /getTodos/1
GET /todos/show/1

# good
DELETE /todos/1
GET /todos/1
```

## 44.3 JSON Server ë¥¼ ì´ìš©í•œ REST API ì‹¤ìŠµ

[JSON-SERVER NPM](https://www.npmjs.com/package/json-server)  
ì±…ì—ì„œëŠ” ì•„ë˜ì˜ ìˆœì„œë¡œ ì•ˆë‚´í•˜ê³  ìˆë‹¤.

```sh
mkdir project-name && cd project-name
npm init -y
npm install json-server --save-dev
touch db.json
json-server --watch db.json
```

ê·¼ë° ì •í™•í•œ ì‚¬ìœ ëŠ” ëª¨ë¥´ê² ì§€ë§Œ json-server ëª…ë ¹ì–´ë¥¼ ëª» ì°¾ëŠ”ë‹¤ê³  ë‚˜ì™€ì„œ ê·¸ëƒ¥ ê¸€ë¡œë²Œë¡œ ì„¤ì¹˜í•˜ê³  ëŒë ¤ì„œ ì§„í–‰í•˜ì˜€ë‹¤.ğŸ’¦  
íŒŒì¼ëª… ì—­ì‹œ ê¼­ db.json ìœ¼ë¡œ í•  í•„ìš” ì—†ë‹¤. ë˜í•œ ê¼­ ê°™ì€ í”„ë¡œì íŠ¸ì—ì„œë§Œ ìš”ì²­í•  í•„ìš”ë„ ì—†ë‹¤.

```js
const xhr = new XMLHttpRequest();
xhr.open("GET", "http://localhost:3030/todos/1");

// MIME íƒ€ì… ì„¤ì •
// xhr.setRequestHeader("content-type", "application/json");

// í˜ì´ë¡œë“œê°€ í•„ìš”í•œ ê²½ìš° send ë©”ì„œë“œ ì¸ìˆ˜ì— ì§ë ¬í™”í•˜ì—¬ ë„£ëŠ”ë‹¤.
xhr.send();
xhr.onload = () => {
  if (xhr.status === 200) {
    console.log(xhr.response);
  } else {
    console.error(xhr.status);
  }
};
```

ìœ„ì™€ ê°™ì€ ì‹ìœ¼ë¡œ ì‹¤ìŠµì„ ì§„í–‰í•  ìˆ˜ ìˆê³  POST, PUT, PATCH ëŠ” ì „ì†¡í•  í˜ì´ë¡œë“œì˜ MIME íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ê²ƒ ì™¸ì— íŠ¹ì´ì‚¬í•­ì´ ì—†ì–´ ìƒëµí•œë‹¤.
